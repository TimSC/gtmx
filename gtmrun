# Run a GTM routine as a named process
# Copy the generic gtmrunx wrapper to the appropriate name in the bin directory
# Create a calltable that containing an entry for the routine to be run
# Create a symbol GTMCI that points to the calltable
# Invoke the appropriately re-named gtmrunx wrapper

# If there is a second argument then use that as the name of the process instead of the
# routine name.

if [ "$2" = "" ]; then
	cp $gtmx/gtmrunx $gtmx/bin/$1
	export GTMCI=$gtmx/bin/$1.ci
	echo "gtm :void $1()" >$gtmx/bin/$1.ci
	$gtmx/bin/$1
else
	cp $gtmx/gtmrunx $gtmx/bin/$2
	export GTMCI=$gtmx/bin/$2.ci
	echo "gtm :void $1()" >$gtmx/bin/$2.ci
	$gtmx/bin/$2
fi
